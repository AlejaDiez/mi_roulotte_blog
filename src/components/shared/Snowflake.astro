<style is:global>
    .snowflake {
        position: fixed;
        top: -20px;
        font-style: normal;
        text-transform: none;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        z-index: 70;
        animation-timing-function: linear;
        animation-name: fall;
        pointer-events: none;
        color: #dde1e6;
        font-weight: 400;
        line-height: 1;
        font-family: var(--font-icon);
        user-select: none;

        &::before {
            content: "\f0c3";
        }
    }

    @keyframes fall {
        0% {
            top: -20px;
            rotate: 0deg;
            opacity: var(--opacity);
        }
        80% {
            top: 90vh;
            rotate: calc(var(--rotation) * 0.8);
            opacity: var(--opacity);
        }
        100% {
            top: 110vh;
            rotate: var(--rotation);
            scale: 0.5;
            opacity: 0;
        }
    }
</style>

<script>
    const RATE = 250;

    const createSnowflake = () => {
        const snowflake = document.createElement("i");
        const duration = Math.random() * 5 + 2;

        snowflake.setAttribute("aria-hidden", "true");
        snowflake.classList.add("snowflake");
        snowflake.style.left = Math.random() * 100 + "vw";
        snowflake.style.fontSize = Math.random() * 10 + 10 + "px";
        snowflake.style.setProperty("--opacity", Math.random().toString());
        snowflake.style.setProperty("--rotation", (Math.random() - 0.5) * 720 + "deg");
        snowflake.style.animationDuration = duration + "s";

        document.body.appendChild(snowflake);
        setTimeout(() => {
            snowflake.remove();
        }, duration * 1000);
    };

    setInterval(createSnowflake, RATE);
</script>
